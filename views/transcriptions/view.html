{{left_sidebar_enabled,right_sidebar_enabled=False,('message' in globals())}}
{{extend 'layout_transcripcion.html'}}

<link rel="stylesheet" type="text/css" href="{{=URL('static','datepicker/css/bootstrap-datepicker.standalone.min.css')}}">

<div class="row">
  <div class="col-md-5">
    <iframe src="{{=pdfurl}}" class="pdf-display">
      <p>Su navegador no soporta la visualización de documentos. Por favor actualícelo
         O use otro navegador.
      </p>
    </iframe>
  </div>
  <div class="col-md-7 column-data">
    <div class="transcription-tag">
      <b>Texto Extraido</b>
      <i id="eye" class="fa fa-eye" aria-hidden="true" data-toggle="collapse" data-target="#colapse-text"></i>
    </div>
    <div id="colapse-text" class="text-extract h-scroll collapse in">
      {{= text}}
    </div>
    <div class="transcription-tag">
      <b>Campos</b>
    </div>
    <div id="colapse-campos" class="text-extract h-scroll">
      {{=form.custom.begin}}

      <div class="field-tag">
        <b>Código </b>
        {{=form.custom.widget.codigo}}
      </div>
        {{if form.errors:}}
          {{if 'codigo' in form.errors:}}
            <div class="error">
              {{=form.errors['codigo']}}
            </div>
          {{pass}}
        {{pass}}

      <div class="field-tag">
        <b>Denominación</b>
        {{=form.custom.widget.denominacion}}
      </div>
      {{if form.errors:}}
        {{if 'denominacion' in form.errors:}}
          <div class="error">
            {{=form.errors['denominacion']}}
          </div>
        {{pass}}
      {{pass}}

      <div class="field-tag">
        <b>Fecha de Elaboración </b>
        {{=form.custom.widget.fecha_elaboracion}}
      </div>
      {{if form.errors:}}
        {{if 'fecha_elaboracion' in form.errors:}}
          <div class="error">
            {{=form.errors['fecha_elaboracion']}}
          </div>
        {{pass}}
      {{pass}}

      <div class="transcription-tag">
        <b>Periodo de Vigencia</b>
      </div>

      <div class="row">
        <div class="col-md-6">
          <div class="transcription-tag">
            <b>Desde</b>
          </div>
          <div class="field-tag">
            <b>Periodo</b>
            {{=form.custom.widget.periodo}}
          </div>
          {{if form.errors:}}
            {{if 'periodo' in form.errors:}}
              <div class="error">
                {{=form.errors['periodo']}}
              </div>
            {{pass}}
          {{pass}}

          <div class="field-tag">
            <b>Año </b>
            {{=form.custom.widget.anio}}
          </div>
          {{if form.errors:}}
            {{if 'anio' in form.errors:}}
              <div class="error">
                {{=form.errors['anio']}}
              </div>
            {{pass}}
          {{pass}}
        </div>
        <div class="col-md-6">
          <div class="transcription-tag">
            <b>Hasta</b>
          </div>

          <div class="field-tag">
            <b>Periodo</b>
            {{=form.custom.widget.periodo_hasta}}
          </div>
          {{if form.errors:}}
            {{if 'periodo_hasta' in form.errors:}}
              <div class="error">
                {{=form.errors['periodo_hasta']}}
              </div>
            {{pass}}
          {{pass}}

          <div class="field-tag">
            <b>Año </b>
            {{=form.custom.widget.anio_hasta}}
          </div>
          {{if form.errors:}}
            {{if 'anio_hasta' in form.errors:}}
              <div class="error">
                {{=form.errors['anio_hasta']}}
              </div>
            {{pass}}
          {{pass}}
        </div>
      </div>

      <div class="transcription-tag">
        <b>Hasta</b>
      </div>
      <div class="field-tag">
        <b>Horas de Teoría</b>
        {{=form.custom.widget.horas_teoria}}
      </div>
      {{if form.errors:}}
        {{if 'horas_teoria' in form.errors:}}
          <div class="error">
            {{=form.errors['horas_teoria']}}
          </div>
        {{pass}}
      {{pass}}

      <div class="field-tag">
        <b>Horas de Práctica</b>
        {{=form.custom.widget.horas_practica}}
      </div>
      {{if form.errors:}}
        {{if 'horas_practica' in form.errors:}}
          <div class="error">
            {{=form.errors['horas_practica']}}
          </div>
        {{pass}}
      {{pass}}

      <div class="field-tag">
        <b>Horas de Laboratorio</b>
        {{=form.custom.widget.horas_laboratorio}}
      </div>
      {{if form.errors:}}
        {{if 'horas_laboratorio' in form.errors:}}
          <div class="error">
            {{=form.errors['horas_laboratorio']}}
          </div>
        {{pass}}
      {{pass}}

      <div class="field-tag">
        <b>Créditos</b>
        {{=form.custom.widget.creditos}}
      </div>
      {{if form.errors:}}
        {{if 'creditos' in form.errors:}}
          <div class="error">
            {{=form.errors['creditos']}}
          </div>
        {{pass}}
      {{pass}}

      <div class="field-tag-wide">
        <b>Objetivos Generales</b>
        {{=form.custom.widget.objetivos_generales}}
      </div>

      <div class="field-tag-wide">
        <b>Objetivos Específicos</b>
        {{=form.custom.widget.objetivos_especificos}}
      </div>

      <div class="field-tag-wide">
        <b>Contenidos Sinopticós</b>
        {{=form.custom.widget.sinopticos}}
      </div>

      <div class="field-tag-wide">
        <b>Requisitos</b>
        {{=form.custom.widget.requisitos}}
      </div>

      <div class="field-tag-wide">
        <b>Estrategias Metodológicas</b>
        {{=form.custom.widget.estrategias_met}}
      </div>

      <div class="field-tag-wide">
        <b>Estrategias de Evaluación</b>
        {{=form.custom.widget.estrategias_eval}}
      </div>

      <div class="field-tag-wide">
        <b>Justificación</b>
        {{=form.custom.widget.justificacion}}
      </div>

      <div class="field-tag-wide">
        <b>Fuentes de Información Recomendadas</b>
        {{=form.custom.widget.ftes_info_recomendadas}}
      </div>

      <div class="field-tag-wide">
        <b>Observaciones</b>
        {{=form.custom.widget.observaciones}}
      </div>

      <div class="transcription-tag">
        <b>Campos Adicionales</b>
      </div>

      <div id="campo_1_container">
        <div id="campo_1_container" class="field-tag">
          <b>Nombre del Campo</b>
          {{=form.custom.widget.campo_1}}
          <datalist id="suggestions_1"></datalist>
        </div>
        <div class="field-tag-wide">
          {{=form.custom.widget.campo_1_cont}}
        </div>
      </div>

      <div id="campo_2_container">
        <div class="field-tag">
          <b>Nombre del Campo</b>
          {{=form.custom.widget.campo_2}}
          <datalist id="suggestions_2"></datalist>
        </div>
        <div class="field-tag-wide">
          {{=form.custom.widget.campo_2_cont}}
        </div>
      </div>

      <div id="campo_3_container">
        <div class="field-tag">
          <b>Nombre del Campo</b>
          {{=form.custom.widget.campo_3}}
          <datalist id="suggestions_3"></datalist>
        </div>
        <div class="field-tag-wide">
          {{=form.custom.widget.campo_3_cont}}
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="transcription-buttons">
    {{=form.custom.end}}
    <a href="{{=URL(c='transcriptions', f='following')}}">
      <button class="btn btn-danger">Regresar</button>
    </a>
  </div>
</div>


<script type="text/javascript" charset="utf8" src="{{=URL('static','datepicker/js/bootstrap-datepicker.min.js')}}"></script>
<script type="text/javascript" charset="utf8" src="{{=URL('static','datepicker/js/bootstrap-datepicker.es.min.js')}}"></script>

<!-- script para el manejo de los campos adicionales -->
<script>
  var first_empty = 0;
  if ($('#TRANSCRIPCION_campo_3').val() == '') {
    $('#campo_3_container').css( "display", "none" );
    first_empty = 3;
  }
  if ($('#TRANSCRIPCION_campo_2').val() == '') {
    $('#campo_2_container').css( "display", "none" );
    first_empty = 2;
  }
  if ($('#TRANSCRIPCION_campo_1').val() == '') {
    $('#campo_1_container').css( "display", "none" );
    first_empty = 1;
  }

  // desactivar todos los campos
  $('#TRANSCRIPCION_codigo').prop('disabled', true);
  $('#TRANSCRIPCION_denominacion').prop('disabled', true);
  $('#TRANSCRIPCION_fecha_elaboracion').prop('disabled', true);
  $('#TRANSCRIPCION_periodo').prop('disabled', true);
  $('#TRANSCRIPCION_anio').prop('disabled', true);
  $('#TRANSCRIPCION_periodo_hasta').prop('disabled', true);
  $('#TRANSCRIPCION_anio_hasta').prop('disabled', true);
  $('#TRANSCRIPCION_horas_teoria').prop('disabled', true);
  $('#TRANSCRIPCION_horas_practica').prop('disabled', true);
  $('#TRANSCRIPCION_horas_laboratorio').prop('disabled', true);
  $('#TRANSCRIPCION_creditos').prop('disabled', true);

  $('#TRANSCRIPCION_objetivos_generales').prop('disabled', true);
  $('#TRANSCRIPCION_objetivos_especificos').prop('disabled', true);
  $('#TRANSCRIPCION_sinopticos').prop('disabled', true);
  $('#TRANSCRIPCION_requisitos').prop('disabled', true);
  $('#TRANSCRIPCION_estrategias_met').prop('disabled', true);
  $('#TRANSCRIPCION_estrategias_eval').prop('disabled', true);
  $('#TRANSCRIPCION_justificacion').prop('disabled', true);
  $('#TRANSCRIPCION_ftes_info_recomendadas').prop('disabled', true);
  $('#TRANSCRIPCION_observaciones').prop('disabled', true);
  $('#TRANSCRIPCION_campo_1').prop('disabled', true);
  $('#TRANSCRIPCION_campo_2').prop('disabled', true);
  $('#TRANSCRIPCION_campo_3').prop('disabled', true);
  $('#TRANSCRIPCION_campo_1_cont').prop('disabled', true);
  $('#TRANSCRIPCION_campo_2_cont').prop('disabled', true);
  $('#TRANSCRIPCION_campo_3_cont').prop('disabled', true);

</script>

<script>
  // Colapsar el area de texto extraido
  $("#eye").click(function(){
    if($( "#colapse-campos" ).hasClass( "campos-large")){
      $( "#colapse-campos" ).removeClass("campos-large");
    } else {
      $( "#colapse-campos" ).addClass("campos-large");
    }
    if($( "#eye" ).hasClass( "fa-eye")){
      $( "#eye" ).removeClass("fa-eye");
      $( "#eye" ).addClass("fa-eye-slash");
    } else {
      $( "#eye" ).removeClass("fa-eye-slash");
      $( "#eye" ).addClass("fa-eye");
    }
  });
</script>
